# "org" ensures this Service is used with the correct Serverless Framework Access Key.
org: 00083ns
# "service" is the name of this project. This will also be added to your AWS resource names.
service: UdemyServerlessFramework

provider:
    name: aws
    runtime: nodejs20.x
    region: ap-northeast-1
    # stage: ${opt:stage, self:custom.defaultStage}
    

functions:
    # api:
    #     handler: ./src/handler.Handler
    #     events:
    #         # - httpApi: "*"  #httpにするとrestAPIに対応する
    #         - http:
    #             method: ANY
    #             path: "/"
    #             cors: true
    #         - http:
    #             method: ANY
    #             path: "/{any}"
    #             cors: true
    costNotif:
        handler: ./src/costNotif.costNotif
        events:
        # 日本時間で毎朝9時
            - schedule: cron(0 0 * * ? *)
            # - http:
            #     method: ANY
            #     path: "/"
            #     cors: true
        environment:
            SLACK_WEBHOOK_URL: ${ssm:UDEMY_AWS_LAMBDA_SLACK_WEBHOOK_URL}
            TZ: Asia/Tokyo

plugins:
    - serverless-offline

custom:
    serverless-offline:
        noPrependStageInUrl: true
